{
  "$schema": "http://json-schema.org/draft-07/schema",

  "definitions": {

    "PricePeriod": {
      "description": "A consecutive time period where all points in time have the same price for each component.",
      "type": "object",
      "properties": {
        "timeInterval": {
          "$ref": "time.schema.json#/definitions/DateTimeInterval"
        },
        "fixedPriceId": {
          "$ref": "common.schema.json#/definitions/Uuid"
        },
        "energyPriceId": {
          "$ref": "common.schema.json#/definitions/Uuid"
        },
        "powerPriceId": {
          "$ref": "common.schema.json#/definitions/Uuid"
        }
      },
      "additionalProperties": false
    },


    "PriceDefinition": {
      "description": "A price definition that can be used to calculate the cost for a consumer.",
      "type": "object",
      "properties": {
        "id": {
          "$ref": "common.schema.json#/definitions/Uuid"
        },
        "component": {
          "type": "string",
          "pattern": "fixed|energy|power",
          "examples": [ "fixed", "energy", "power" ]
        },
        "name": {
          "type": "string",
          "examples": [ "16 A", "14 kW", "Low winter", "High winter", "Summer" ]
        },
        "description": {
          "description": "Text to describe the price definition.",
          "type": "string"
        },
        "validPeriod": {
          "description": "The time period during this price definition is valid.",
          "$ref": "time.schema.json#/definitions/DateTimeInterval"
        },
        "priceExVat": {
          "type": "number",
          "examples": [ 171.32, 154 ]
        },
        "priceIncVat": {
          "type": "number",
          "examples": [ 171.32, 154 ]
        },
        "currency": {
          "$ref": "common.schema.json#/definitions/Currency",
          "example": "SEK"
        },
        "unit": {
          "$ref": "common.schema.json#/definitions/Unit",
          "example": "kWh"
        }
      },
      "additionalProperties": false
    },


    "Price": {
      "description": "Price, VAT and currency.",
      "type": "object",
      "properties": {
        "priceExVat": {
          "type": "number",
          "examples": [ 171.32, 154 ]
        },
        "priceIncVat": {
          "type": "number",
          "examples": [ 171.32, 154 ]
        },
        "currency": {
          "$ref": "common.schema.json#/definitions/Currency",
          "example": "SEK"
        }
      },
      "additionalProperties": false
    },


    "CostFunction": {
      "description": "A pseudo code function that describes how to calculate the cost for a set of price components. Usage examples at https://someexamples.",
      "type": "string",
      "examples": [
        "sum(energy(c)*price(c))",
        "sum(peak(c)*price(c))"
      ],
      "additionalProperties": false
    }
  }
}